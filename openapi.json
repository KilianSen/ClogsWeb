{"openapi":"3.1.0","info":{"title":"Clogs Server","version":"0.1.0"},"paths":{"/api/agent/":{"post":{"summary":"Register New Agent","operationId":"register_new_agent_api_agent__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Agent"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"string","title":"Response Register New Agent Api Agent  Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/agent/{agent_id}/":{"delete":{"summary":"Delete Agent","operationId":"delete_agent_api_agent__agent_id___delete","parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","title":"Agent Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"summary":"Get Agent Info","operationId":"get_agent_info_api_agent__agent_id___get","parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","title":"Agent Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Agent"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/agent/{agent_id}/heartbeat":{"post":{"summary":"Receive Agent Heartbeat","operationId":"receive_agent_heartbeat_api_agent__agent_id__heartbeat_post","parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","title":"Agent Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/agent/{agent_id}/container":{"post":{"summary":"Register Container","operationId":"register_container_api_agent__agent_id__container_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Container"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"string","title":"Response Register Container Api Agent  Agent Id  Container Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/agent/{agent_id}/logs":{"post":{"summary":"Upload Agent Logs","operationId":"upload_agent_logs_api_agent__agent_id__logs_post","parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","title":"Agent Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"anyOf":[{"$ref":"#/components/schemas/MultiContainerLogTransfer"},{"$ref":"#/components/schemas/src__model__api__MultilineLogTransfer"},{"$ref":"#/components/schemas/src__models__agents__Log"}],"title":"Logs"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/agent/{agent_id}/container/{container_id}/":{"post":{"summary":"Update Container State","operationId":"update_container_state_api_agent__agent_id__container__container_id___post","parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","title":"Agent Id"}},{"name":"container_id","in":"path","required":true,"schema":{"type":"string","title":"Container Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Container"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"summary":"Delete Container","operationId":"delete_container_api_agent__agent_id__container__container_id___delete","parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","title":"Agent Id"}},{"name":"container_id","in":"path","required":true,"schema":{"type":"string","title":"Container Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/agent/{agent_id}/container/{container_id}/logs":{"post":{"summary":"Upload Container Logs","operationId":"upload_container_logs_api_agent__agent_id__container__container_id__logs_post","parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","title":"Agent Id"}},{"name":"container_id","in":"path","required":true,"schema":{"type":"string","title":"Container Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"anyOf":[{"$ref":"#/components/schemas/src__models__agents__Log"},{"$ref":"#/components/schemas/src__model__api__MultilineLogTransfer"}],"title":"Logs"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/agent/{agent_id}/container/{container_id}/status":{"post":{"summary":"Update Container Status","operationId":"update_container_status_api_agent__agent_id__container__container_id__status_post","parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","title":"Agent Id"}},{"name":"container_id","in":"path","required":true,"schema":{"type":"string","title":"Container Id"}},{"name":"status","in":"query","required":true,"schema":{"type":"string","title":"Status"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/agent/{agent_id}/context/":{"put":{"summary":"Register Context","operationId":"register_context_api_agent__agent_id__context__put","parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","title":"Agent Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Context"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"summary":"Get Agent Contexts","operationId":"get_agent_contexts_api_agent__agent_id__context__get","parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","title":"Agent Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Context"},"title":"Response Get Agent Contexts Api Agent  Agent Id  Context  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/agent/{agent_id}/context/{context_id}/":{"delete":{"summary":"Delete Context","operationId":"delete_context_api_agent__agent_id__context__context_id___delete","parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","title":"Agent Id"}},{"name":"context_id","in":"path","required":true,"schema":{"type":"integer","title":"Context Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/agent/{agent_id}/container/":{"get":{"summary":"Get Agent Containers","operationId":"get_agent_containers_api_agent__agent_id__container__get","parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","title":"Agent Id"}},{"name":"context_id","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Context Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Container"},"title":"Response Get Agent Containers Api Agent  Agent Id  Container  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/health":{"get":{"tags":["API"],"summary":"Health Check","description":"Health check endpoint to verify that the API is running.","operationId":"health_check_api_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/web/orphans":{"get":{"tags":["API"],"summary":"Get Orphans","description":"Retrieves a list of containers that do not have an associated state entry.\nThese are considered \"orphaned\" containers.\n:return:","operationId":"get_orphans_api_web_orphans_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/_IntersectionContainerAndState"},"type":"array","title":"Response Get Orphans Api Web Orphans Get"}}}}}}},"/api/web/services":{"get":{"tags":["API"],"summary":"Get Services","description":"Retrieves a mapping of context names to their associated containers and states.\n:return:","operationId":"get_services_api_web_services_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":{"items":{"$ref":"#/components/schemas/_IntersectionContainerContainerAndState"},"type":"array"},"type":"object","title":"Response Get Services Api Web Services Get"}}}}}}},"/api/web/logs":{"get":{"tags":["API"],"summary":"Get Logs","description":"Retrieves logs for a specific container or all containers if no container_id is provided.\n:param container_id: The ID of the container to retrieve logs for. If None, retrieves logs for all containers.\n:param limit: The maximum number of log entries to retrieve.\n:param session: The database session dependency.\n:return: A list of log entries.","operationId":"get_logs_api_web_logs_get","parameters":[{"name":"container_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Container Id"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/src__models__agents__Log"},"title":"Response Get Logs Api Web Logs Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/processors/uptime":{"get":{"tags":["API"],"summary":"Get Uptime","operationId":"get_uptime_api_processors_uptime_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/":{"get":{"summary":"Root","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"Agent":{"properties":{"id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Id"},"hostname":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Hostname"},"heartbeat_interval":{"type":"integer","title":"Heartbeat Interval","default":30},"discovery_interval":{"type":"integer","title":"Discovery Interval","default":30},"on_host":{"type":"boolean","title":"On Host"}},"type":"object","required":["hostname","on_host"],"title":"Agent"},"Container":{"properties":{"id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Id"},"agent_id":{"type":"string","title":"Agent Id"},"context":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Context"},"name":{"type":"string","title":"Name"},"image":{"type":"string","title":"Image"},"created_at":{"type":"integer","title":"Created At"}},"type":"object","required":["agent_id","name","image","created_at"],"title":"Container","description":"Represents a container being monitored by an agent."},"Context":{"properties":{"id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Id"},"agent_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Agent Id"},"name":{"type":"string","title":"Name"},"type":{"$ref":"#/components/schemas/ContextType"}},"type":"object","required":["name","type"],"title":"Context"},"ContextType":{"type":"string","enum":["compose","swarm"],"title":"ContextType"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"MultiContainerLogTransfer":{"properties":{"agent_id":{"type":"string","title":"Agent Id"},"container_logs":{"items":{"$ref":"#/components/schemas/src__model__api__MultilineLogTransfer"},"type":"array","title":"Container Logs"}},"type":"object","required":["agent_id","container_logs"],"title":"MultiContainerLogTransfer","description":"This class is used by the api endpoint to receive logs from multiple containers in a single transfer."},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"_IntersectionContainerAndState":{"properties":{"id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Id"},"status":{"type":"string","title":"Status"},"agent_id":{"type":"string","title":"Agent Id"},"context":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Context"},"name":{"type":"string","title":"Name"},"image":{"type":"string","title":"Image"},"created_at":{"type":"integer","title":"Created At"}},"type":"object","title":"_IntersectionContainerAndState"},"_IntersectionContainerContainerAndState":{"properties":{"id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Id"},"agent_id":{"type":"string","title":"Agent Id"},"name":{"type":"string","title":"Name"},"type":{"$ref":"#/components/schemas/ContextType"},"status":{"type":"string","title":"Status"},"context":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Context"},"image":{"type":"string","title":"Image"},"created_at":{"type":"integer","title":"Created At"}},"type":"object","title":"_IntersectionContainerContainerAndState"},"src__model__api__MultilineLogTransfer":{"properties":{"container_id":{"type":"string","title":"Container Id"},"logs":{"items":{"$ref":"#/components/schemas/src__models__agents__Log"},"type":"array","title":"Logs"}},"type":"object","required":["container_id","logs"],"title":"MultilineLogTransfer","description":"This class is used by the api endpoint to receive multiline log entries in a single transfer."},"src__models__agents__Log":{"properties":{"id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Id"},"container_id":{"type":"string","title":"Container Id"},"timestamp":{"type":"integer","title":"Timestamp"},"level":{"type":"string","title":"Level"},"message":{"type":"string","title":"Message"}},"type":"object","required":["container_id","timestamp","level","message"],"title":"Log","description":"Represents a single log entry from a container."}}}}